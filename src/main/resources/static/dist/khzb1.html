
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="css/layui.css" media="all">
</head>
<body>
<fieldset class="layui-elem-field layui-field-title">
    <legend>考核指标</legend>
</fieldset>
<div class="layui-collapse" lay-accordion>
    <div class="layui-colla-item szzb">
        <h2 class="layui-colla-title">素质指标</h2>
        <div class="layui-colla-content" >
            <table class="layui-hide" id="szzb" lay-filter=""></table>
        </div>
    </div>
    <div class="layui-colla-item nlzb">
        <h2 class="layui-colla-title">能力指标</h2>
        <div class="layui-colla-content" >
            <table class="layui-hide " id="nlzb" lay-filter=""></table>
        </div>
    </div>
    <div class="layui-colla-item tdzb">
        <h2 class="layui-colla-title">态度指标</h2>
        <div class="layui-colla-content" >
            <table class="layui-hide" id="tdzb" lay-filter=""></table>
        </div>
    </div>
    <div class="layui-colla-item jxzlzb">
        <h2 class="layui-colla-title">教学质量满意度指标</h2>
        <div class="layui-colla-content" >
            <table class="layui-hide "id="jxzl" lay-filter=""></table>
        </div>
    </div>
    <div class="layui-colla-item yjzb">
        <h2 class="layui-colla-title">业绩指标</h2>
        <div class="layui-colla-content" >
            <table class="layui-hide " id="yjzb" lay-filter=""></table>
        </div>
    </div>
</div>
<!-- form表单添加指标提交 -->
<div id="zbtj" hidden>
    <fieldset class="layui-elem-field layui-field-title">
        <legend>添加指标</legend>
    </fieldset>
    <div>
        <form class="layui-form" action="">
            <!-- 考核名称 -->
            <div class="layui-form-item">
                <label class="layui-form-label">名称</label>
                <div class="layui-input-inline">
                    <input type="text" name="er_name" id="er_name" class="layui-input">
                </div>
            </div>
            <!-- 权重 -->
            <div class="layui-form-item">
                <label class="layui-form-label">权重</label>
                <div class="layui-input-inline">
                    <input type="text" name="weight" class="layui-input">
                </div>
            </div>
            <!-- 考核目标 -->
            <div class="layui-form-item">
                <label class="layui-form-label">考核目标</label>
                <div class="layui-input-block">
                    <textarea name="khmb" class="layui-textarea"></textarea>
                </div>
            </div>
            <!-- 考核细则 -->
            <div class="layui-form-item">
                <label class="layui-form-label">考核细则</label>
                <div class="layui-input-block">
                    <textarea name="khxz" class="layui-textarea"></textarea>
                </div>
            </div>
        </form>
    </div>
</div>
<script type="text/html" id="toolbarDemo">
    <div class="layui-btn-container">
        <button class="layui-btn layui-btn-sm AddData" lay-event="AddData" id="AddData">添加</button>
    </div>
</script>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="layui.js"></script>
<script>
    layui.use(['element','form'],function (){
        var element = layui.element;
        var form = layui.form;
    });
    layui.use('table',function (){
        var table = layui.table;
        var $=layui.jquery;
        table.render({
            elem:"#szzb"
            ,toolbar:'#toolbarDemo'
            ,defaultToolbar:['filter','exports','print',{
                title:'提示'
                ,layEvent:'LAYTABLE_TIPS'
                ,icon:'layui-icon-tips'
            }]
            ,cols:[[
                {field:'er_name',title: '指标名称',fixed:'left'}
                ,{field: 'wight',title: '权重'}
                ,{field: 'khmb', title: '考核目标'}
                ,{field: 'khxz', title: '考核细则'}
            ]]
            ,data:[]
            ,page: true

        });
        table.render({
            elem:"#nlzb"
            ,toolbar:'#toolbarDemo'
            ,defaultToolbar:['filter','exports','print',{
                title:'提示'
                ,layEvent:'LAYTABLE_TIPS'
                ,icon:'layui-icon-tips'
            }]
            ,cols:[[
                {field:'er_name',title: '指标名称',fixed:'left'}
                ,{field: 'wight',title: '权重'}
                ,{field: 'khmb', title: '考核目标'}
                ,{field: 'khxz', title: '考核细则'}
            ]]
            ,data:[]
            ,page: true

        });
        table.render({
            elem:"#tdzb"
            ,toolbar:'#toolbarDemo'
            ,defaultToolbar:['filter','exports','print',{
                title:'提示'
                ,layEvent:'LAYTABLE_TIPS'
                ,icon:'layui-icon-tips'
            }]
            ,cols:[[
                {field:'er_name',title: '指标名称',fixed:'left'}
                ,{field: 'wight',title: '权重'}
                ,{field: 'khmb', title: '考核目标'}
                ,{field: 'khxz', title: '考核细则'}
            ]]
            ,data:[]
            ,page: true

        });
        table.render({
            elem:"#jxzl"
            ,toolbar:'#toolbarDemo'
            ,defaultToolbar:['filter','exports','print',{
                title:'提示'
                ,layEvent:'LAYTABLE_TIPS'
                ,icon:'layui-icon-tips'
            }]
            ,cols:[[
                {field:'er_name',title: '指标名称',fixed:'left'}
                ,{field: 'wight',title: '权重'}
                ,{field: 'khmb', title: '考核目标'}
                ,{field: 'khxz', title: '考核细则'}
            ]]
            ,data:[]
            ,page: true

        });
        table.render({
            elem:"#yjzb"
            ,toolbar:'#toolbarDemo'
            ,defaultToolbar:['filter','exports','print',{
                title:'提示'
                ,layEvent:'LAYTABLE_TIPS'
                ,icon:'layui-icon-tips'
            }]
            ,cols:[[
                {field:'er_name',title: '指标名称',fixed:'left'}
                ,{field: 'wight',title: '权重'}
                ,{field: 'khmb', title: '考核目标'}
                ,{field: 'khxz', title: '考核细则'}
            ]]
            ,data:[]
            ,page: true

        });
        $(".AddData").click(function (){
            layer.open({
                type:1
                ,area:['50%','75%']
                ,title:'添加指标信息'
                ,btn:['确定','取消']
                ,content:$("#zbtj")
                ,yes:function (index,layero){
                   if (index==1){
                        //layer.msg("szzb");
                      // layer.msg($("[name='er_name']").val());
                       $.getJSON('url',{
                           yi_name:'szzb',
                           er_name:$("[name='er_name']").val(),
                           weight:$("[name='weight']").val(),
                           khmb:$("[name='khmb']").val(),
                           khxz:$("[name='khxz']").val(),
                       },function (data){
                           if(data>0){
                               layer.alert('增加成功',{icon:1,title:'提示'},function(i){
                                   layer.close(i);
                                   layer.close(index);//关闭弹出层
                                   $("#zbtj")[0].reset()//重置form
                               })
                               table.reload('szzb',{//重载表格
                                   page:{
                                       curr:1
                                   }
                               })
                           }
                       });
                    }if(index==3){
                       // layer.msg("tdzb");
                        $.getJSON('url',{
                            yi_name:'nlzb',
                            er_name:$("[name='er_name']").val(),
                            weight:$("[name='weight']").val(),
                            khmb:$("[name='khmb']").val(),
                            khxz:$("[name='khxz']").val(),
                        },function (data){
                            if(data>0){
                                layer.alert('增加成功',{icon:1,title:'提示'},function(i){
                                    layer.close(i);
                                    layer.close(index);//关闭弹出层
                                    $("#zbtj")[0].reset()//重置form
                                })
                                table.reload('nlzb',{//重载表格
                                    page:{
                                        curr:1
                                    }
                                })
                            }
                        });
                    }if(index==5){
                        // layer.msg("tdzb");
                        $.getJSON('url',{
                            yi_name:'tdzb',
                            er_name:$("[name='er_name']").val(),
                            weight:$("[name='weight']").val(),
                            khmb:$("[name='khmb']").val(),
                            khxz:$("[name='khxz']").val(),
                        },function (data){
                            if(data>0){
                                layer.alert('增加成功',{icon:1,title:'提示'},function(i){
                                    layer.close(i);
                                    layer.close(index);//关闭弹出层
                                    $("#zbtj")[0].reset()//重置form
                                })
                                table.reload('tdzb',{//重载表格
                                    page:{
                                        curr:1
                                    }
                                })
                            }
                        });
                    }if(index==7){
                        // layer.msg("tdzb");
                        $.getJSON('url',{
                            yi_name:'jxzl',
                            er_name:$("[name='er_name']").val(),
                            weight:$("[name='weight']").val(),
                            khmb:$("[name='khmb']").val(),
                            khxz:$("[name='khxz']").val(),
                        },function (data){
                            if(data>0){
                                layer.alert('增加成功',{icon:1,title:'提示'},function(i){
                                    layer.close(i);
                                    layer.close(index);//关闭弹出层
                                    $("#zbtj")[0].reset()//重置form
                                })
                                table.reload('jxzl',{//重载表格
                                    page:{
                                        curr:1
                                    }
                                })
                            }
                        });
                    }if(index==9){
                        // layer.msg("tdzb");
                        $.getJSON('url',{
                            yi_name:'yjzb',
                            er_name:$("[name='er_name']").val(),
                            weight:$("[name='weight']").val(),
                            khmb:$("[name='khmb']").val(),
                            khxz:$("[name='khxz']").val(),
                        },function (data){
                            if(data>0){
                                layer.alert('增加成功',{icon:1,title:'提示'},function(i){
                                    layer.close(i);
                                    layer.close(index);//关闭弹出层
                                    $("#zbtj")[0].reset()//重置form
                                })
                                table.reload('yjzb',{//重载表格
                                    page:{
                                        curr:1
                                    }
                                })
                            }
                        });
                    }

                }
            });

    });
    });
</script>
</body>
</html>

